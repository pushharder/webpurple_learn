---
title: Нереляционные базы данных
templateKey: 'article-page'
order: 1
---
# Нереляционные базы данных
## Слайды
{% slides %}
./slides.html
{% endslides %}

## Практика
### Дополнительные ссылки
* MongoDB 4.0.4 - https://www.mongodb.com/download-center/community
* Robo 3T 1.2.1 - https://robomongo.org/download (Download Robo 3T)
* Файлы `cars.json`, `suppliers.json`, `supplies.json` для 1 лабораторной - <a href="./lab1.zip" target="_blank">lab1.zip</a>
* Файлы `products.json`, `suppliers.json`, `supplies.json` для 2 лабораторной - <a href="./lab2.zip" target="_blank">lab2.zip</a>

### Лабораторная 1
1. Установить `MongoDB` и `Robo 3T`
2. Запустить локальный сервер
3. Создать новую БД `Products`
4. Создать новую коллекцию `Cars`
5. Импортировать данные в коллекцию из файла `cars.json` (`.\mongoimport.exe --db Products --collection Cars --type json --file cars.json --jsonArray`)
6. Вывести все машины, которые были выпущены в `1990` году и позднее, отсортировать по году выпуска в порядке убывания
7. Вывести все машины марки `Audi` белого цвета (`White`)
8. Выбрать машины, которые дешевле `25000`, отсортировать по возрастанию и вывести первые `3`
9. Вывести машины черного цвета (`Black`) или машины марки `Mersedes`
10. Для всех машин, которые старше 30 лет (`1988`) добавить поле `discount` и установить `30` в качестве значения
11. Вывести все машины, кроме машин марки `BMW`
12. Вывести сумму цен, среднюю цену, минимальную цену и максимальную цену на автомобили марки `Volvo`
13. Выполнить импорт из файла `suppliers.json` (`.\mongoimport.exe --db Products --collection Suppliers --type json --file suppliers.json --jsonArray`)
14. Выполнить импорт из файла `supplies.json` (`.\mongoimport.exe --db Products --collection Supplies --type json --file supplies.json --jsonArray`)
15. Вывести все поставки (`Supplies`), для которых поставщик (`supplier`) имеет статус `Активен` (`Suppliers.isActive = true`)
16. Вывести имя компании (`companyName`), адрес (`address`), телефон (`phone`) поставщиков (`Suppliers`), дату поставки (`date`) из коллекции `Supplies`, которые поставляли автомобили марки `Mersedes`, отсортировать по дате поставки в порядке убывания (`Для преобразования строки в дату можно использовать $dateFromString`)
17. Вывести список всех существующих цветов автомобилей
18. Вывести список всех существующих цветов для `BMW`
19. Вывести уникальный список всех брендов и соответствующее им кол-во имеющихся автомобилей
20. Удалить коллекцию `Cars`
21. Удалить БД `Products`

### Лабораторная 2
#### Подготовка
1. Создать новые коллекции `Products`, `Suppliers`, `Supplies`.
2. Импортировать шаблонные документа коллекций из файлов.
3. В процессе выполнения работы необходимо дополнять коллекции необходимыми документами.

#### Углубленное изучение метода `db.collection.find`:
1. Вывести полную информацию обо всех потенциальных поставщиках.
2. Вывести информацию о наименовании и фирме-производителе товара.
3. Вывести информацию о двух первых хранимых записях о поставщиках.
[https://docs.mongodb.com/manual/reference/method/cursor.limit/index.html]
4. Вывести информацию обо всех товарах, цена которых меньше 100 рублей.
[https://docs.mongodb.com/manual/reference/operator/query-comparison/]
5. Вывести информацию обо всех товарах, цена которых меньше 1000 рублей, но больше 200 рублей, используя логические операции.
6. Вывести информацию о следующих поставщиках: Мышкин, Кошкин, Рыбкин.
7. Вывести информацию о товарах, названия которых начинается с буквы К, Л или Ч.
[https://docs.mongodb.com/manual/reference/operator/query/regex/index.html]
8. Вывести информацию о поставщиках, у которых указан телефон.
9. Вывести информацию о товарах, для которых не указан производитель.
10. Найти количество потенциальных поставщиков.
[https://docs.mongodb.com/manual/reference/method/db.collection.count/index.html]

#### Углубленное изучение метода `db.collection.aggregate`:
[https://docs.mongodb.com/manual/reference/method/db.collection.aggregate/index.html]
1. Вывести информацию обо всех потенциальных товарах с указанием цены товара в рублях, долларах и евро.
[https://docs.mongodb.com/manual/reference/operator/aggregation/project/index.html]
[https://docs.mongodb.com/manual/reference/operator/aggregation/divide/index.html]
2. Вычислить среднюю цену товара.
[https://docs.mongodb.com/manual/reference/operator/aggregation/]
[https://docs.mongodb.com/manual/reference/operator/aggregation/group/index.html]
3. Найти минимальную цену товара.
4. Найти максимальную цену товара.
5. Вывести количество товаров по каждой фирме-производителю.
[https://docs.mongodb.com/manual/reference/operator/aggregation/sum/index.html]
6. Вывести количество товаров по каждой фирме-производителю, названия которых начинается с букв А и Г.
[https://docs.mongodb.com/manual/reference/operator/aggregation/match/index.html]
8. Вывести названия фирм-производителей, которые представляют только один товар.
9. Выполнить предыдущий запрос для фирм-производителей, названия которых начинается с буквы А.
10. Вывести список наименований потенциальных поставщиков в алфавитном порядке.
[https://docs.mongodb.com/manual/reference/operator/aggregation/sort/index.html]
11. Вывести список наименований и цен товаров, отсортировав его по возрастанию цены товаров.
12. Вывести информацию о трех самых дешевых товарах.
[https://docs.mongodb.com/manual/reference/operator/aggregation/limit/index.html]
13. Вывести информацию о товарах, названия которых начинается на буквы К, Л или Ч.
14. Вывести полную информацию обо всех потенциальных поставщиках. Если телефон поставщика не указан, то в соответствующем столбце вывести строку: «отсутствует».
[https://docs.mongodb.com/manual/reference/operator/aggregation/ifNull/index.html]
15. Вывести номера товаров, которые поставляет и поставщик с номером 1, и поставщик с номером 2.
[https://docs.mongodb.com/manual/reference/operator/aggregation/addToSet/index.html]
[https://docs.mongodb.com/manual/reference/operator/aggregation/setIntersection/index.html]
16. Вывести наименования товаров, которые производит и фирма «Болео», и фирма «Гурман».
17. Вывести информацию о товарах, изменив цену товара в связи с сезонными скидками в соответствии со следующей таблицей:
[https://docs.mongodb.com/manual/reference/operator/aggregation/cond/index.html]

| Цена товара | Скидка |
|-------------|--------|
| &lt;100     | 10%    |
| 100..1000   | 20%    |
| &gt;1000    | 30%    |

#### Углубленное изучение запросов с несколькими коллекциями:
1. Вывести информацию о поставках с указанием наименования поставщика.
[https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/index.html]
[https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/]
2. Вывести следующую информацию о поставках: наименование поставщика, наименование товара, дата и объем поставки.
3. Вывести информацию обо всех потенциальных поставщиках, указав даты поставок, если такие поставки были.
[https://docs.mongodb.com/manual/reference/operator/aggregation/map/index.html]
4. Вывести информацию обо всех возможных товарах, указав объемы поставок, если такие поставки были.
5. Вывести информацию о каждой поставке с указанием наименования поставщика, наименования товара, объема поставки, цены товара и стоимости поставки в рублях, долларах и евро.
6. Вывести информацию о количестве поставок каждого поставщика.
7. Вычислить среднюю стоимость поставок Рыбкина.

#### Углубленное изучение запросов с подзапросами:
1. Вывести информацию обо всех товарах, цена которых больше цены товара Ложка.
2. Вывести информацию о поставках, стоимость которых не ниже средней стоимости.
3. Вывести наименование поставщика для поставки с максимальной стоимостью.
4. Вывести список поставщиков, которые не поставляют никаких товаров.
5. Вывести наименования товаров, цена которых больше цены всех остальных товаров.
6. Вывести наименования товаров, цена которых превышает цену хотя бы одного другого товара.
7. Вывести информацию о тех поставщиках, которые участвовали хотя бы в одной поставке.
8. Вывести информацию о товарах, ни разу никем не поставляемых.
9. Вывести список наименований поставщиков, которые поставляют ТОЛЬКО товар Вилка.
[https://docs.mongodb.com/manual/reference/operator/projection/elemMatch/index.html]
